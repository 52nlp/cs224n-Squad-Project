RNET

python main.py --mode=train --experiment_name=rnet_span --dropout=0.20 --batch_size=20 --hidden_size_encoder=200 --embedding_size=300 --do_char_embed=False --add_highway_layer=False --rnet_attention=True --bidaf_attention=False --answer_pointer_RNET=True --smart_span=True

RNET - eval model

python code/main.py --experiment_name=rnet_span --dropout=0.20 --batch_size=20 --hidden_size_encoder=200 --embedding_size=300 --do_char_embed=False --add_highway_layer=False --rnet_attention=True --bidaf_attention=False --answer_pointer_RNET=True --smart_span=True--mode=official_eval \
--json_in_path=data/tiny-dev.json \
--json_out_path=predictions_rnet.json \
--ckpt_load_dir=experiments/rnet_best/best_checkpoint


Solo submission using main.py for RNET-SPAN
python code/main.py --experiment_name=rnet_span --dropout=0.20 --batch_size=20 --hidden_size_encoder=200 --embedding_size=300 --do_char_embed=False --add_highway_layer=False --rnet_attention=True --bidaf_attention=False --answer_pointer_RNET=True --smart_span=True --mode=official_eval \
--json_in_path=data/tiny-dev.json \
--json_out_path=predictions.json \
--ckpt_load_dir=experiments/rnet_span/best_checkpoint

on codalab

cl run --name gen-answers-rnet --request-docker-image abisee/cs224n-dfp:v4 \
:code :best_checkpoint glove.txt:0x97c870/glove.6B.300d.txt data.json:0x4870af \
'python code/main.py --experiment_name=rnet_span --dropout=0.20 --batch_size=20 --hidden_size_encoder=200 --embedding_size=300 --do_char_embed=False --add_highway_layer=False --rnet_attention=True --bidaf_attention=False --answer_pointer_RNET=True --smart_span=True --mode=official_eval \
--glove_path=glove.txt --json_in_path=data.json --ckpt_load_dir=best_checkpoint' --request-cpus 1 --request-memory 4g --request-disk 1g --request-time 1d

cl info --verbose gen-answers-rnet

cl wait --tail gen-answers-rnet


cl cat gen-answers-rnet
cl cat gen-answers-rnet/stderr 
cl cat gen-answers-rnet/stdout 
cl cat gen-answers-rnet/predictions.json 



### For BIDAF best

python code/main.py --experiment_name=bidaf_best --dropout=0.15 --batch_size=60 --hidden_size_encoder=150 --embedding_size=100 --do_char_embed=False --add_highway_layer=True --rnet_attention=False --bidaf_attention=True --answer_pointer_RNET=False --smart_span=True --hidden_size_modeling=150 --mode=train

BIDAF - eval model on Local

python code/main.py --experiment_name=bidaf_best --dropout=0.15 --batch_size=60 --hidden_size_encoder=150 --embedding_size=100 --do_char_embed=False --add_highway_layer=True --rnet_attention=False --bidaf_attention=True --answer_pointer_RNET=False --smart_span=True --hidden_size_modeling=150 --mode=official_eval \
--json_in_path=data/tiny-dev.json \
--json_out_path=predictions_bidaf.json \
--ckpt_load_dir=experiments/bidaf_best/best_checkpoint


python code/evaluate.py data/tiny-dev.json predictions_bidaf.json

on codalab

cl run --name gen-answers-bidaf --request-docker-image abisee/cs224n-dfp:v4 \
code:code best_checkpoint:best_checkpoint glove.txt:0x97c870/glove.6B.100d.txt data.json:0x4870af \
'python code/main.py --experiment_name=bidaf_best --dropout=0.15 --batch_size=60 --hidden_size_encoder=150 --embedding_size=100 --do_char_embed=False --add_highway_layer=True --rnet_attention=False --bidaf_attention=True --answer_pointer_RNET=False --smart_span=True --hidden_size_modeling=150 --mode=official_eval \
--glove_path=glove.txt --json_in_path=data.json --ckpt_load_dir=best_checkpoint' --request-cpus 1 --request-memory 10g --request-disk 1g --request-time 1d

cl info --verbose gen-answers-bidaf

cl wait --tail gen-answers-bidaf

cl cat gen-answers-bidaf
cl cat gen-answers-bidaf/stderr 
cl cat gen-answers-bidaf/stdout 
cl cat gen-answers-bidaf/predictions.json 

Post to dev leaderboard

cl edit gen-answers-bidaf -T cs224n-win18-dev --description "best model 1"

cl edit gen-answers-bidaf -T cs224n-win18-test --description "best model 1"



Ensemble model

cl run --name gen-answers-bidaf-prob --request-docker-image abisee/cs224n-dfp:v4 \
code:code best_checkpoint:best_checkpoint glove.txt:0x97c870/glove.6B.100d.txt data.json:0x4870af \
'python code/main_ensemble.py --experiment_name=bidaf_best --dropout=0.15 --batch_size=60 --hidden_size_encoder=150 --embedding_size=100 --do_char_embed=False --add_highway_layer=True --rnet_attention=False --bidaf_attention=True --answer_pointer_RNET=False --smart_span=True --hidden_size_modeling=150 --mode=official_eval \
--glove_path=glove.txt --json_in_path=data.json --ckpt_load_dir=best_checkpoint' --request-cpus 1 --request-memory 10g --request-disk 1g --request-time 1d


cl info --verbose gen-answers-bidaf-prob

cl wait --tail gen-answers-bidaf-prob

cl cat gen-answers-bidaf-prob/predictions.json 

### RNET ###
cl upload experiments/rnet_span/best_checkpoint


cl run --name gen-answers-rnet-prob --request-docker-image abisee/cs224n-dfp:v4 \
:code :best_checkpoint glove.txt:0x97c870/glove.6B.300d.txt data.json:0x4870af \
'python code/main_ensemble.py --experiment_name=rnet_span --dropout=0.20 --batch_size=20 --hidden_size_encoder=200 --embedding_size=300 --do_char_embed=False --add_highway_layer=False --rnet_attention=True --bidaf_attention=False --answer_pointer_RNET=True --smart_span=True --mode=official_eval \
--glove_path=glove.txt --json_in_path=data.json --ckpt_load_dir=best_checkpoint' --request-cpus 1 --request-memory 15g --request-disk 1g --request-time 1d

cl info --verbose gen-answers-rnet-prob

cl wait --tail gen-answers-rnet-prob

cl cat gen-answers-rnet-prob/predictions.json 


### ENSEMBLE on Codalab######

cl run --name gen-answers-ensemble --request-docker-image abisee/cs224n-dfp:v4 \
:code file1:gen-answers-bidaf-prob/predictions.json file2:gen-answers-rnet-prob/predictions.json  \
'python code/ensemble.py file1 file2' --request-cpus 1 --request-memory 10g --request-disk 1g --request-time 1d

cl info --verbose gen-answers-ensemble

cl cat gen-answers-ensemble/predictions.json


## Send ensemble to dev leaderboard
cl edit gen-answers-ensemble -T cs224n-win18-dev --description "ensemble 1"


## send to sanity check leaderboard

cl edit gen-answers-ensemble -T cs224n-win18-sanity-check --description "best ensemble 1"
cl edit gen-answers-bidaf -T cs224n-win18-sanity-check --description "best model 1"

cl edit gen-answers-ensemble -T cs224n-win18-test --description "ensemble sub 1"

